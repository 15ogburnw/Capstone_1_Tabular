{% extends 'home.html' %}


{% block user_profile %}active{% endblock %}


{% block panel_title %} <p class="navbar-brand">My Profile</p> {% endblock %}


{% block panel_content %}

<div class="row">
    <div class="col-md-4">
      <div class="card card-user">
        <div class="image">
          <img style="height:100%; width:100%; border-radius: 10px 10px 0px 0px;" src="{{user.cover_pic}}" alt="cover photo">
        </div>
        <div class="card-body">
          <div class="author">
            <a href="#">
              <img class="avatar border-gray" src="{{user.profile_pic}}" alt="profile photo">
              <h5 class="title">{{user.username}}</h5>
            </a>
            <p>
              {{user.full_name}}
            </p>

            <p>
              
              <span class="iconify mr-2" data-icon="{{user.instrument.icon}}" data-width="30" data-height="30"></span>
              <span>{{user.instrument.name}}</span>
            </p>
            {% if user.bio %}
            <p class="text-center description font-weight-normal">{{user.bio}}</p>
            {% endif %}
          </div>
          
        </div>
        <div class="card-footer">
          <hr>
          <div class="button-container">
            <div class="row">
              <div class="col-lg-3 col-md-6 col-6 ml-auto">
                <h5>{{user.friends | length}}<br><a href="/"><small>Friends</small></a></h5>
              </div>
              <div class="col-lg-4 col-md-6 col-6 ml-auto mr-auto">
                <h5>{{user.playlists | length}}<br><a href="/"><small>Playlists</small></a></h5>
              </div>
              <div class="col-lg-3 mr-auto">
                <h5>{{user.bands | length}}<br><a href="/"><small>Bands</small></a></h5>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-8">
      <div class="card card-user">
        <div class="card-header">
          <h5 class="card-title">Edit Profile</h5>
        </div>
        <div class="card-body">
          <form role="form" class="text-start" action="{{url_for('edit_my_profile')}}" method="post">

            {{ form.hidden_tag() }}

            {% for field in form if field.widget.input_type != 'hidden' %}
              {% for error in field.errors %}
                <span class="text-danger">{{ error }}</span>
              {% endfor %}

              
              <div class="form-group my-3 ">
                {{ field.label(class_='form-label') }}
                {{ field(class_="form-control") }}
              </div>
              
            {% endfor %}
       

            <div class="row">
              <div class="update ml-auto mr-auto">
                <button type="submit" class="btn btn-primary btn-round">Update Profile</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>


{% endblock %}